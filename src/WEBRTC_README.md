# üé• WebRTC –í–∏–¥–µ–æ-—Å–≤—è–∑—å –≤ PARTA

## –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### üöÄ –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **[–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (30 —Å–µ–∫)](./QUICK_START_WEBRTC.md)** - –ö–∞–∫ –Ω–∞—á–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∏–¥–µ–æ-—Å–≤—è–∑—å
- **[–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã (FAQ)](./WEBRTC_FAQ.md)** - –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### üë®‚Äçüíª –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- **[–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](./WEBRTC_SETUP.md)** - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- **[–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—Ç–∫–∏](./WEBRTC_TECHNICAL_NOTES.md)** - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- **[–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π](./WEBRTC_CHANGELOG.md)** - Changelog –∏ roadmap

### üîß Hotfixes
- **[–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π](./HOTFIX_SUMMARY.md)** - –ö–∞–∫ –º—ã –∏—Å–ø—Ä–∞–≤–∏–ª–∏ `NotAllowedError`

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (30 —Å–µ–∫—É–Ω–¥)
1. –í–æ–π–¥–∏—Ç–µ –≤ —Å–µ—Å—Å–∏—é —Å –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º
2. –£–≤–∏–¥–∏—Ç–µ —Å–∏–Ω—é—é –ø–∞–Ω–µ–ª—å "–†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É"
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É
4. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –≤ –±—Ä–∞—É–∑–µ—Ä–µ
5. –ì–æ—Ç–æ–≤–æ! –í—ã —Å–ª—ã—à–∏—Ç–µ –¥—Ä—É–≥ –¥—Ä—É–≥–∞ üéâ

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (5 –º–∏–Ω—É—Ç)
```typescript
// 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ö—É–∫ useWebRTC
import { useWebRTC } from '../utils/useWebRTC';

const {
  localStream,
  remoteStream,
  requestMediaAccess,
  hasRequestedMedia,
  connectionState,
} = useWebRTC({
  sessionId: 'session-123',
  userId: 'user@example.com',
  userName: 'User Name',
  enabled: true,
  autoStartMedia: false, // –í–∞–∂–Ω–æ: false!
});

// 2. –î–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∫–Ω–æ–ø–∫—É –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
<Button onClick={requestMediaAccess}>
  –†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É
</Button>

// 3. –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ –ø–æ—Ç–æ–∫–∏ –∫ video —ç–ª–µ–º–µ–Ω—Ç–∞–º
<video ref={localVideoRef} srcObject={localStream} />
<video ref={remoteVideoRef} srcObject={remoteStream} />
```

---

## üìä –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- [x] Peer-to-peer –≤–∏–¥–µ–æ-—Å–≤—è–∑—å —á–µ—Ä–µ–∑ WebRTC
- [x] –ê—É–¥–∏–æ (–º–∏–∫—Ä–æ—Ñ–æ–Ω) –∏ –≤–∏–¥–µ–æ (–∫–∞–º–µ—Ä–∞)
- [x] –Ø–≤–Ω—ã–π –∑–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π (–±–µ–∑ –∞–≤—Ç–æ–∑–∞–ø—Ä–æ—Å–∞)
- [x] –°–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Supabase KV Store
- [x] ICE candidate exchange
- [x] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–º –∏ –∫–∞–º–µ—Ä–æ–π
- [x] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- [x] Renegotiation –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–µ–¥–∏–∞
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å retry
- [x] Fallback –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —á–∞—Ç
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
- [x] –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è

### üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ
- [ ] TURN —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–µ—Ç–µ–π
- [ ] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### üìã –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ
- [ ] –ì—Ä—É–ø–ø–æ–≤—ã–µ –∑–≤–æ–Ω–∫–∏ (3+ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)
- [ ] Screen sharing (–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞)
- [ ] –ó–∞–ø–∏—Å—å —Å–µ—Å—Å–∏–π
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –≤–∏–¥–µ–æ
- [ ] –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Ñ–æ–Ω—ã

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    ActiveSession.tsx                        ‚îÇ
‚îÇ  - UI –¥–ª—è –≤–∏–¥–µ–æ-—Å–≤—è–∑–∏                                       ‚îÇ
‚îÇ  - –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è                                        ‚îÇ
‚îÇ  - –°–∏–Ω—è—è/–∫—Ä–∞—Å–Ω–∞—è –ø–∞–Ω–µ–ª–∏                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    useWebRTC.ts (Hook)                      ‚îÇ
‚îÇ  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º                            ‚îÇ
‚îÇ  - Polling –¥–ª—è —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏                                 ‚îÇ
‚îÇ  - –°–æ—Å—Ç–æ—è–Ω–∏—è: localStream, remoteStream, etc.              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                WebRTCConnection.ts (Class)                  ‚îÇ
‚îÇ  - RTCPeerConnection wrapper                                ‚îÇ
‚îÇ  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞-–ø–æ—Ç–æ–∫–∞–º–∏                                ‚îÇ
‚îÇ  - –ú–µ—Ç–æ–¥—ã: createOffer, createAnswer, addIceCandidate      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              WebRTC Browser API                             ‚îÇ
‚îÇ  - RTCPeerConnection                                        ‚îÇ
‚îÇ  - getUserMedia()                                           ‚îÇ
‚îÇ  - MediaStream                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Supabase Edge Functions (Server)                   ‚îÇ
‚îÇ  - /webrtc/join-session                                     ‚îÇ
‚îÇ  - /webrtc/offer, /webrtc/answer                           ‚îÇ
‚îÇ  - /webrtc/ice-candidate                                    ‚îÇ
‚îÇ  - –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ KV Store                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
User A Browser                     Server                    User B Browser
      ‚îÇ                              ‚îÇ                              ‚îÇ
      ‚îÇ‚îÄ‚îÄ‚îÄ join-session ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ join-session ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
      ‚îÇ                              ‚îÇ                              ‚îÇ
      ‚îÇ‚îÄ‚îÄ‚îÄ create offer ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ                              ‚îÇ
      ‚îÇ    (–±–µ–∑ –º–µ–¥–∏–∞)               ‚îÇ                              ‚îÇ
      ‚îÇ                              ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ poll offer ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
      ‚îÇ                              ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ offer ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ
      ‚îÇ                              ‚îÇ                              ‚îÇ
      ‚îÇ                              ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ answer ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
      ‚îÇ<‚îÄ‚îÄ‚îÄ poll answer ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                              ‚îÇ
      ‚îÇ                              ‚îÇ                              ‚îÇ
      ‚îÇ<‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ICE candidates ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê>‚îÇ
      ‚îÇ                   P2P connection established                 ‚îÇ
      ‚îÇ                              ‚îÇ                              ‚îÇ
      ‚îÇ [clicks "Allow Mic"]         ‚îÇ                              ‚îÇ
      ‚îÇ‚îÄ‚îÄ‚îÄ getUserMedia() ‚îÄ‚îÄ>        ‚îÇ                              ‚îÇ
      ‚îÇ<‚îÄ‚îÄ‚îÄ MediaStream ‚îÄ‚îÄ‚îÄ‚îÄ          ‚îÇ                              ‚îÇ
      ‚îÇ                              ‚îÇ                              ‚îÇ
      ‚îÇ‚îÄ‚îÄ‚îÄ renegotiate offer ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ                              ‚îÇ
      ‚îÇ                              ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ poll offer ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
      ‚îÇ                              ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ offer ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ
      ‚îÇ                              ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ answer ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
      ‚îÇ<‚îÄ‚îÄ‚îÄ poll answer ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                              ‚îÇ
      ‚îÇ                              ‚îÇ                              ‚îÇ
      ‚îÇ<‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê AUDIO/VIDEO FLOWS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê>‚îÇ
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å

### ‚úÖ –ß—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ
- **DTLS —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** - –í—Å–µ –º–µ–¥–∏–∞-–¥–∞–Ω–Ω—ã–µ —à–∏—Ñ—Ä—É—é—Ç—Å—è
- **Peer-to-peer** - –°–µ—Ä–≤–µ—Ä –Ω–µ –≤–∏–¥–∏—Ç –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ
- **–Ø–≤–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è** - –ë—Ä–∞—É–∑–µ—Ä –≤—Å–µ–≥–¥–∞ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç
- **–ù–µ—Ç –∑–∞–ø–∏—Å–∏** - –ù–∏—á–µ–≥–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- **–¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω–∞—è —Å–µ—Å—Å–∏—è** - –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –ø–∞—Ä—Ç–Ω—ë—Ä—É –ø–æ —Å–µ—Å—Å–∏–∏

### üîê Best practices
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è WebRTC)
- –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ access tokens –≤ localStorage
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –ø–µ—Ä–µ–¥ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º
- –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞/–∫–∞–º–µ—Ä—ã

---

## üåê –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤

| –ë—Ä–∞—É–∑–µ—Ä | Desktop | Mobile | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|---------|---------|--------|------------|
| Chrome | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è |
| Edge | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | –ù–∞ Chromium |
| Firefox | ‚úÖ –•–æ—Ä–æ—à–æ | ‚úÖ –•–æ—Ä–æ—à–æ | –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ |
| Safari | ‚úÖ –•–æ—Ä–æ—à–æ | ‚úÖ –•–æ—Ä–æ—à–æ | –ú–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å user gesture |
| Opera | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | ‚úÖ –•–æ—Ä–æ—à–æ | –ù–∞ Chromium |
| IE | ‚ùå –ù–µ—Ç | - | –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è |

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –¢–∏–ø–∏—á–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
- **–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ**: 2-5 —Å–µ–∫—É–Ω–¥ (polling)
- **–ê—É–¥–∏–æ –∑–∞–¥–µ—Ä–∂–∫–∞**: 50-200–º—Å (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–µ—Ç–∏)
- **–í–∏–¥–µ–æ –∑–∞–¥–µ—Ä–∂–∫–∞**: 100-300–º—Å (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–µ—Ç–∏)

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- **CPU**: 5-15% (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–∏–¥–µ–æ)
- **RAM**: ~50-100MB –Ω–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- **–°–µ—Ç—å (–∞—É–¥–∏–æ)**: ~50-100 Kbps
- **–°–µ—Ç—å (–≤–∏–¥–µ–æ)**: ~500Kbps - 2Mbps

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –ú–∏–Ω–∏–º—É–º 1 Mbps –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
- WiFi –∏–ª–∏ –ø—Ä–æ–≤–æ–¥–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- –ù–∞—É—à–Ω–∏–∫–∏ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è —ç—Ö–æ
- –ó–∞–∫—Ä—ã—Ç—å —Ä–µ—Å—É—Ä—Å–æ—ë–º–∫–∏–µ –≤–∫–ª–∞–¥–∫–∏

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –°–µ—Ç—å
- ‚ùå –ú–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Å—Ç—Ä–æ–≥–∏—Ö –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Å–µ—Ç—è—Ö (–Ω—É–∂–µ–Ω TURN)
- ‚ùå Symmetric NAT –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å (–Ω—É–∂–µ–Ω TURN)
- ‚ö†Ô∏è Polling –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã (–¥–æ 2 —Å–µ–∫ –∑–∞–¥–µ—Ä–∂–∫–∞)

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚ùå –¢–æ–ª—å–∫–æ 2 —É—á–∞—Å—Ç–Ω–∏–∫–∞ (P2P –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- ‚ùå –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ
- ‚ùå –ù–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### –ë—Ä–∞—É–∑–µ—Ä—ã
- ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏—è—Ö
- ‚ö†Ô∏è Safari –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å autoplay
- ‚ö†Ô∏è Mobile Safari —Ç—Ä–µ–±—É–µ—Ç user gesture

---

## üÜò –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

### –ü—Ä–æ–±–ª–µ–º—ã?
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [FAQ](./WEBRTC_FAQ.md) - –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤ —Ç–∞–º
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ [Hotfix Summary](./HOTFIX_SUMMARY.md) - –º–æ–∂–µ—Ç –±—ã—Ç—å —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –Ω–∞ –æ—à–∏–±–∫–∏
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑ –¥—Ä—É–≥–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞/—Å–µ—Ç–∏

### –ù–∞—à–ª–∏ –±–∞–≥?
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
2. –û–ø–∏—à–∏—Ç–µ —à–∞–≥–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
3. –£–∫–∞–∂–∏—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –≤–µ—Ä—Å–∏—é
4. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –æ—à–∏–±–∫–∏

### –•–æ—Ç–∏—Ç–µ —É–ª—É—á—à–∏—Ç—å?
–°–º–æ—Ç—Ä–∏—Ç–µ [WEBRTC_CHANGELOG.md](./WEBRTC_CHANGELOG.md) ‚Üí —Ä–∞–∑–¥–µ–ª Roadmap

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [MDN: WebRTC API](https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API)
- [WebRTC.org](https://webrtc.org/)
- [W3C WebRTC Spec](https://www.w3.org/TR/webrtc/)

### –¢—É—Ç–æ—Ä–∏–∞–ª—ã
- [WebRTC –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö](https://webrtc.org/getting-started/overview)
- [Perfect Negotiation Pattern](https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Perfect_negotiation)
- [getUserMedia() Guide](https://web.dev/getusermedia-intro/)

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ—Ç–ª–∞–¥–∫–∏
- [chrome://webrtc-internals](chrome://webrtc-internals) - Chrome DevTools –¥–ª—è WebRTC
- [about:webrtc](about:webrtc) - Firefox WebRTC stats
- [Supabase Dashboard](https://app.supabase.com) - KV Store logs

---

## üéâ –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–°–ø–∞—Å–∏–±–æ –≤—Å–µ–º, –∫—Ç–æ –ø–æ–º–æ–≥ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —É–ª—É—á—à–∏—Ç—å WebRTC –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –≤ PARTA!

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- WebRTC Browser API
- Supabase Edge Functions & KV Store
- React Hooks
- TypeScript
- Google STUN servers

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**: 1.2  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 21 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ Production Ready
